# [NBI - Autonomous Service]

The autonomous service offers the GUI an API that provides the needed data to audit SELFNETâ€™s intelligence and
self-organizing behaviour, e.g., have an overview of enforced actions and planned tactics, or manage the Tactical
Autonomic Language (TAL) scripts that describe SELFNET use cases, are some of the features available through this API.

## Installation

The NBI autonomous service contains a Dockerfile, that make the usage of the service simple.

First the user creates the docker image

```sh
$ docker build -t image_name .
```

Then the user runs the created image

```sh
$ docker run -itd --net host image_name
```

### Requirements

This project requires the Falcon framework as the WSGI framework, Gunicorn to run the WSGI APP, the keystone module to
authorize the requests. The requirements are already installed on the Docker container.

Other requirements are listed on the requirements.txt file.

## Configuration

To configure the Catalogue service three files must be used:

- Dockerfile, which contains the GUNICORN BIND variable
- wsgi.ini, with the keystone middleware configurations
- conf.ini, to configure GUNICORN, LOGGING the INTELLIGENCE DB, TAL DB, TAL Service URL and TAL WP4 ENGINE URL

## Usage

After configuring the service, starting the docker container and having keystone and the identity service running, the
user will have a REST API that can be used to manage the autonomous SELFNET systems, e.g., TAL objects, symptoms and
Intelligence models generated by SELFNET. The Keystone and identity service are only used to acquire an authentication
token. To use this correctly the user must have the conf.ini file correctly configured with its services and databases
running.

To obtain a session token:

```sh
curl -X POST \
  http://0.0.0.0:7000/nbi/auth/api/login \
  -H 'content-type: application/json' \
  -d '{
  "auth": {
    "username": "username",
    "password": "password",
    "tenant": "tenant"
  }
}'
```

There's a yaml file containing an OpenAPI Specification that can be used on swagger to test the service. It's only
needed the keystone installation and identity service running both also available in the NBI project, as Dockerfiles.

